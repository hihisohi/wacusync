<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>로그인 API 사용 예시</title>
    <style>
      body {
        font-family: "Pretendard", Arial, sans-serif;
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
        line-height: 1.6;
      }
      .example-section {
        background: #f5f5f5;
        padding: 20px;
        margin: 20px 0;
        border-radius: 8px;
      }
      .code-block {
        background: #2d2d2d;
        color: #f8f8f2;
        padding: 15px;
        border-radius: 5px;
        overflow-x: auto;
      }
      .success {
        color: #4caf50;
      }
      .error {
        color: #f44336;
      }
      .button {
        background: #007bff;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
        margin: 5px;
      }
      .button:hover {
        background: #0056b3;
      }
      .result {
        margin-top: 10px;
        padding: 10px;
        border-radius: 5px;
        background: #e9ecef;
      }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  </head>
  <body>
    <h1>로그인 API 사용 예시</h1>

    <div class="example-section">
      <h2>API 설정</h2>
      <div class="code-block">
        <pre>
// API 클라이언트 설정
const authAPI = axios.create({
  baseURL: "/data/dummy/auth",
  timeout: 5000,
});

// 로그인 API 함수
const loginAPI = {
  login: async (credentials) => {
    try {
      const response = await authAPI.post('/login.json', credentials);
      return { success: true, data: response.data };
    } catch (error) {
      return { 
        success: false, 
        error: error.response?.data || { code: 'NETWORK_ERROR' }
      };
    }
  }
};</pre
        >
      </div>
    </div>

    <div class="example-section">
      <h2>기본 사용법</h2>
      <div class="code-block">
        <pre>
// 로그인 시도
const result = await loginAPI.login({
  username: 'testuser',
  password: 'password123'
});

if (result.success) {
  console.log('로그인 성공:', result.data);
  // 토큰 저장
  localStorage.setItem('authToken', result.data.data.token);
} else {
  console.error('로그인 실패:', result.error);
}</pre
        >
      </div>
    </div>

    <div class="example-section">
      <h2>실제 테스트</h2>
      <p>아래 버튼들을 클릭하여 다양한 로그인 시나리오를 테스트해보세요:</p>

      <button class="button" onclick="testSuccessLogin()">
        성공 케이스 테스트
      </button>
      <button class="button" onclick="testUserNotFound()">
        사용자 없음 테스트
      </button>
      <button class="button" onclick="testInvalidPassword()">
        잘못된 비밀번호 테스트
      </button>
      <button class="button" onclick="testAccountLocked()">
        계정 잠김 테스트
      </button>

      <div id="result" class="result" style="display: none"></div>
    </div>

    <div class="example-section">
      <h2>응답 형식</h2>
      <h3>성공 응답:</h3>
      <div class="code-block">
        <pre>
{
  "result": "success",
  "message": "로그인이 성공적으로 완료되었습니다.",
  "data": {
    "token": "JWT_TOKEN_HERE",
    "refreshToken": "REFRESH_TOKEN_HERE",
    "expiresIn": 3600,
    "user": {
      "id": "1234",
      "username": "testuser",
      "email": "test@example.com",
      "name": "테스트 사용자"
    }
  }
}</pre
        >
      </div>

      <h3>에러 응답:</h3>
      <div class="code-block">
        <pre>
{
  "result": "error",
  "code": "NOT_FOUND_USER",
  "message": "존재하지 않는 사용자입니다.",
  "details": {
    "field": "username",
    "reason": "입력하신 사용자명을 찾을 수 없습니다."
  }
}</pre
        >
      </div>
    </div>

    <script>
      // API 클라이언트 설정
      const authAPI = axios.create({
        baseURL: "/data/dummy/auth",
        timeout: 5000,
      });

      // 로그인 API 함수
      const loginAPI = {
        login: async (credentials) => {
          try {
            const response = await authAPI.post("/login.json", credentials);
            return { success: true, data: response.data };
          } catch (error) {
            return {
              success: false,
              error: error.response?.data || {
                code: "NETWORK_ERROR",
                message: "네트워크 오류",
              },
            };
          }
        },
      };

      function showResult(result, isSuccess) {
        const resultDiv = document.getElementById("result");
        resultDiv.style.display = "block";
        resultDiv.className = "result " + (isSuccess ? "success" : "error");
        resultDiv.innerHTML =
          "<pre>" + JSON.stringify(result, null, 2) + "</pre>";
      }

      async function testSuccessLogin() {
        const result = await loginAPI.login({
          username: "testuser",
          password: "password123",
        });
        showResult(result, result.success);
      }

      async function testUserNotFound() {
        // 실제로는 서버에서 다른 URL로 응답하거나 조건에 따라 다른 응답을 반환
        try {
          const response = await authAPI.get(
            "/login-error-user-not-found.json"
          );
          showResult({ success: false, error: response.data }, false);
        } catch (error) {
          showResult({ success: false, error: error.response?.data }, false);
        }
      }

      async function testInvalidPassword() {
        try {
          const response = await authAPI.get(
            "/login-error-invalid-password.json"
          );
          showResult({ success: false, error: response.data }, false);
        } catch (error) {
          showResult({ success: false, error: error.response?.data }, false);
        }
      }

      async function testAccountLocked() {
        try {
          const response = await authAPI.get(
            "/login-error-account-locked.json"
          );
          showResult({ success: false, error: response.data }, false);
        } catch (error) {
          showResult({ success: false, error: error.response?.data }, false);
        }
      }
    </script>
  </body>
</html>
